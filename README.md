# ğŸ¥ íœ´ë¨¼ìŠ¤ì¼€ì´í”„ í´ë¡ ì½”ë”© ê³¼ì œ
<img src="https://user-images.githubusercontent.com/73621658/169637259-93d7f249-72e2-4653-a424-440401f05a69.png"/>
ğŸ€ ì§ˆë³‘ëª…ì¹­ XMLì„ ì´ìš©í•œ ì§ˆë³‘ê²€ìƒ‰ ì‚¬ì´íŠ¸

- **Github Repository URL** <br/> https://github.com/wanted-pre-onboarding-FE-01/B-search-clinical.git
- **ë°°í¬ URL** <br/> [![Netlify Status](https://api.netlify.com/api/v1/badges/5e1e62d4-1be5-457f-93a4-730b8dacae74/deploy-status)](https://app.netlify.com/sites/humanscape1b/deploys)  <br/> https://628878e4065a40471b600f6b--humanscape1b.netlify.app/

<br/>

# ì‹¤í–‰ ë°©ë²•
> git clone https://github.com/wanted-pre-onboarding-FE-01/B-search-clinical.git  â yarn install â yarn start

<br/>

# ğŸ—‚ í”„ë¡œì íŠ¸ ì†Œê°œ
- **ê°œë°œ ê¸°ê°„** 22.05.19 - 22.05.21
- **íŒ€ì›** ê°•ë„í¬, ê¹€ë¯¼íš¨, ì´ìš°ì„±, ì „í•´ê°•, ì •ê·œì¬
- **í”„ë¡œì íŠ¸ ê°œìš”** <br/>
ë³¸ í”„ë¡œì íŠ¸ëŠ” íœ´ë¨¼ ìŠ¤ì¼€ì´í”„ ê³¼ì œë¡œ ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ì§ˆë³‘ì •ë³´ ì„œë¹„ìŠ¤ api ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ê²€ìƒ‰ì–´ ì¶”ì²œ ê¸°ëŠ¥ì´ ìˆëŠ” ê²€ìƒ‰ì°½ì„ êµ¬í˜„í•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. 

<br/>

# ğŸ“ í´ë” êµ¬ì¡°
<details>
    <summary>í¼ì¹˜ê¸°</summary>
ğŸ“¦src<br/>
 â”£ ğŸ“‚assets<br/>
 â”ƒ â”— ğŸ“‚svg<br/>
 â”ƒ â”ƒ â”£ ğŸ“œdecoration-M.svg<br/>
 â”ƒ â”ƒ â”£ ğŸ“œdecoration-PC.svg<br/>
 â”ƒ â”ƒ â”£ ğŸ“œgnb.svg<br/>
 â”ƒ â”ƒ â”£ ğŸ“œindex.ts<br/>
 â”ƒ â”ƒ â”£ ğŸ“œlogo.svg<br/>
 â”ƒ â”ƒ â”— ğŸ“œsearch_icon.svg<br/>
 â”£ ğŸ“‚hooks<br/>
 â”ƒ â”£ ğŸ“œuseAppDispatch.tsx<br/>
 â”ƒ â”£ ğŸ“œuseAppSelector.tsx<br/>
 â”ƒ â”— ğŸ“œuseKeywordQuery.tsx<br/>
 â”£ ğŸ“‚routes<br/>
 â”ƒ â”£ ğŸ“‚Footer<br/>
 â”ƒ â”ƒ â”£ ğŸ“œFooter.module.scss<br/>
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx<br/>
 â”ƒ â”£ ğŸ“‚Header<br/>
 â”ƒ â”ƒ â”£ ğŸ“‚Gnb<br/>
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œGNB.module.scss<br/>
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œindex.tsx<br/>
 â”ƒ â”ƒ â”£ ğŸ“œHeader.module.scss<br/>
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx<br/>
 â”ƒ â”£ ğŸ“‚Main<br/>
 â”ƒ â”ƒ â”£ ğŸ“‚RecommendKeyword<br/>
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œRecommendKeyword.module.scss<br/>
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œRecommendKeywordItem.tsx<br/>
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œindex.tsx<br/>
 â”ƒ â”ƒ â”£ ğŸ“‚SectionDecoration<br/>
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œSectionDecoration.module.scss<br/>
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œindex.tsx<br/>
 â”ƒ â”ƒ â”£ ğŸ“œMain.module.scss<br/>
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx<br/>
 â”ƒ â”£ ğŸ“œRoutes.module.scss<br/>
 â”ƒ â”— ğŸ“œindex.tsx<br/>
 â”£ ğŸ“‚service<br/>
 â”ƒ â”— ğŸ“œapis.ts<br/>
 â”£ ğŸ“‚states<br/>
 â”ƒ â”£ ğŸ“œindex.ts<br/>
 â”ƒ â”— ğŸ“œsearch.ts<br/>
 â”£ ğŸ“‚styles<br/>
 â”ƒ â”£ ğŸ“‚base<br/>
 â”ƒ â”ƒ â”£ ğŸ“œ_fonts.scss<br/>
 â”ƒ â”ƒ â”£ ğŸ“œ_more.scss<br/>
 â”ƒ â”ƒ â”— ğŸ“œ_reset.scss<br/>
 â”ƒ â”£ ğŸ“‚constants<br/>
 â”ƒ â”ƒ â”£ ğŸ“œ_colors.scss<br/>
 â”ƒ â”ƒ â”£ ğŸ“œ_levels.scss<br/>
 â”ƒ â”ƒ â”— ğŸ“œ_sizes.scss<br/>
 â”ƒ â”£ ğŸ“‚mixins<br/>
 â”ƒ â”ƒ â”£ ğŸ“œ_animation.scss<br/>
 â”ƒ â”ƒ â”£ ğŸ“œ_flexbox.scss<br/>
 â”ƒ â”ƒ â”£ ğŸ“œ_position.scss<br/>
 â”ƒ â”ƒ â”£ ğŸ“œ_responsive.scss<br/>
 â”ƒ â”ƒ â”£ ğŸ“œ_typography.scss<br/>
 â”ƒ â”ƒ â”— ğŸ“œ_visual.scss<br/>
 â”ƒ â”£ ğŸ“œindex.js<br/>
 â”ƒ â”— ğŸ“œindex.scss<br/>
 â”£ ğŸ“‚types<br/>
 â”£ ğŸ“‚utils<br/>
 â”ƒ â”— ğŸ“œaxios.ts<br/>
 â”£ ğŸ“œindex.tsx<br/>
 â”£ ğŸ“œreact-app-env.d.ts<br/>
 â”£ ğŸ“œreportWebVitals.ts<br/>
 â”— ğŸ“œsetupTests.ts<br/>
</details>

<br/>

# ğŸ”¨ ê¸°ìˆ  ìŠ¤íƒ
<div align="center">
 <img src="https://img.shields.io/badge/HTML5-E34F26?style=flat-square&logo=HTML5&logoColor=white"/>
 <img src="https://img.shields.io/badge/CSS3-1572B6?style=flat-square&logo=CSS3&logoColor=white"/>
 <img src="https://img.shields.io/badge/Sass-CC6699?style=flat-square&logo=Sass&logoColor=white"/>
 <img src="https://img.shields.io/badge/TypeScript-3178C6?style=flat-square&logo=TypeScript&logoColor=white"/>
 <img src="https://img.shields.io/badge/React-61DAFB?style=flat-square&logo=React&logoColor=white"/>
 <img src="https://img.shields.io/badge/Redux-764ABC?style=flat-square&logo=Redux&logoColor=white"/>

 <br/>

|ë¼ì´ë¸ŒëŸ¬ë¦¬|ë‚´ìš©|ë²„ì „|
|:---:|:---:|:---:|
|react query | ë¹„ë™ê¸° í†µì‹  | 3.39.0 |
| react-use | ë¦¬ì•¡íŠ¸ í¸ì˜ | 17.3.2 |
|redux toolkit | ë¦¬ë•ìŠ¤ í¸ì˜ | 1.8.1 |
| lodash | ìë°”ìŠ¤í¬ë¦½íŠ¸ í¸ì˜ | 4.17.21 |
| axios | ë¹„ë™ê¸° í†µì‹  | 0.27.2 |
| classnames | styles ê´€ë ¨ | 2.3.1 |
| expressJS | api ê°œë°œ | 4.18.1 |

<br/>

</div>

# ğŸ ê¸°ëŠ¥ ì„¤ëª… with GIF

 |ê²€ìƒ‰ ê¸°ëŠ¥|ì„ íƒ ê¸°ëŠ¥|í¼ì§€ ë¬¸ìì—´ ê²€ìƒ‰ ê¸°ëŠ¥|
 |:---:|:---:|:---:|
 |<img src="https://user-images.githubusercontent.com/73621658/169635351-cf24445c-ee61-4ea4-b6fb-60ba4fd6048b.gif"/>|<img src="https://user-images.githubusercontent.com/73621658/169635275-b98085ec-b69a-4223-be6a-2c26df61aa0c.gif"/>|<img src="https://user-images.githubusercontent.com/73621658/169635275-b98085ec-b69a-4223-be6a-2c26df61aa0c.gif"/>|

<br/>



---
## ì‚¬ìš© ë°©ë²•

1. ì‚¬ìš©ìê°€ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
2. ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ê°€ ì¶”ì²œ ê²€ìƒ‰ì–´ ê²°ê³¼ë¥¼ expressJS ì„œë²„ì— ìš”ì²­í•©ë‹ˆë‹¤.
3. expressJS ì„œë²„ì—ì„œ ì…ë ¥ëœ ê²€ìƒ‰ì–´ì— ë”°ë¼ í¼ì§€ ë¬¸ìì—´ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ì—¬ ê´€ë ¨ëœ ê²°ê³¼ë¥¼ ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ì¤ë‹ˆë‹¤.
4. ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê²€ìƒ‰ì–´ì™€ ì¼ì¹˜í•˜ëŠ” ì¶”ì²œ ê²€ìƒ‰ì–´ëŠ” ë³¼ë“œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
5. í¼ì§€ ë¬¸ìì—´ ê²€ìƒ‰ì— ì˜í•œ ì¶”ì²œ ê²€ìƒ‰ì–´ëŠ” ë³¼ë“œ ì²˜ë¦¬ê°€ ì•ˆë©ë‹ˆë‹¤.
6. ì…ë ¥ ì°½ì—ì„œ ìƒí•˜ ë°©í–¥í‚¤ ë° tab í‚¤ë¥¼ ì´ìš©í•˜ì—¬ ì¶”ì²œ ê²€ìƒ‰ì–´ë¡œ í¬ì»¤ìŠ¤ ì´ë™ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
7. ì¶”ì²œ ê²€ìƒ‰ì–´ë¡œ ì´ë™í•  ê²½ìš° ì…ë ¥ì°½ì— í‘œì‹œë˜ëŠ” ë‹¨ì–´ê°€ í¬ì»¤ìŠ¤ ëœ ì¶”ì²œ ê²€ìƒ‰ì–´ë¡œ ë°”ë€ë‹ˆë‹¤.

<br/>

### ê²€ìƒ‰ ê¸°ëŠ¥

<details>
    <summary>êµ¬í˜„ ë°©ë²•</summary>

## API í˜¸ì¶œ ë°©ë²•
1. Debounceë¥¼ í†µí•´ ì‚¬ìš©ìê°€ ì…ë ¥í•  ë•Œë§ˆë‹¤ APIê°€ í˜¸ì¶œë˜ì§€ ì•Šê³ , ì‚¬ìš©ìê°€ ì…ë ¥í•œ í›„ 0.5ì´ˆì— APIë¥¼ í˜¸ì¶œí•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
```ts
const setGlobalKeyword = useMemo(() => debounce((value) => dispatch(setKeyword(value)), 500), [dispatch])
```
 
2. react-queryë¥¼ ì‚¬ìš©í•˜ì—¬ staleTimeì„ í†µí•´ 10ë¶„ë™ì•ˆ í•œë²ˆ ì…ë ¥í–ˆë˜ ê°’ì€ ë‹¤ì‹œ APIë¥¼ ë¶€ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ë˜, enabledì— !!keywordë¥¼ ì‘ì„±í•˜ì—¬ keywordê°€ ìˆì„ ë•Œë§Œ APIê°€ ì‹¤í–‰ë˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
```ts
const useKeywordQuery = (keyword: string) => {
  const dispatch = useAppDispatch()
 
  return useQuery(['recommendKeyword', keyword], () => getDissNameCodeList(keyword), {
    enabled: !!keyword,
    staleTime: 1000 * 60 * 10,
    refetchOnWindowFocus: false,
    suspense: true,
    onSuccess: () => dispatch(incrementCallCount(keyword)),
  })
}
```

</details>

---

### ë°©í–¥í‚¤ ì„ íƒ ê¸°ëŠ¥
<details>
    <summary>êµ¬í˜„ ë°©ë²•</summary>

1. ì—°ê´€ ê²€ìƒ‰ì–´ ë¦¬ìŠ¤íŠ¸ë¥¼ ref ë°°ì—´ í˜•íƒœë¡œ ìƒì„±í•©ë‹ˆë‹¤.

2. ì—°ê´€ ê²€ìƒ‰ì–´ ì¸ë±ìŠ¤ë¥¼ ê´€ë¦¬í•  autoFrame stateë¥¼ ìƒì„±, keydown ì´ë²¤íŠ¸ë¥¼ í†µí•´ ê´€ë¦¬í•©ë‹ˆë‹¤.
    ```ts
    const keyEvent = useCallback(
        (e: globalThis.KeyboardEvent) => {
            if (e.isComposing === true) return

            const size = autoFrameRef.current.length
            switch (e.key) {
            case 'ArrowUp':
                e.preventDefault()
                setAutoFrame((prev) => (prev > 0 ? prev - 1 : size - 1))
                break
            case 'ArrowDown':
            case 'Tab':
                e.preventDefault()
                setAutoFrame((prev) => (prev < size - 1 ? prev + 1 : 0))
            }
        },
        [autoFrameRef]
    )
    ```
    í•œê¸€ì´ë‚˜ íŠ¹ìˆ˜ í‚¤ ê°™ì€ ê²½ìš° keydown ì´ë²¤íŠ¸ê°€ 2ë²ˆ ë°œìƒí•˜ëŠ” ë²„ê·¸ë¥¼ ë°œê²¬í•˜ì—¬
    isComposing ìƒíƒœë¥¼ í™•ì¸í•´ ì¤‘ë³µ ì´ë²¤íŠ¸ ë°œìƒì„ ë°©ì§€í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.

3. autoFrame ê°’ì— ë”°ë¥¸ focus ìƒíƒœ ë³€ê²½
   ```ts
    useEffect(() => {
        autoFrameRef.current[autoFrame]?.focus()
    }, [autoFrame])
   ```
   useEffectë¥¼ í†µí•´ autoFrameì´ ë³€ê²½ë˜ë©´ ê°’ì— ë”°ë¥¸ ref ìš”ì†Œì— focusë¥¼ ë¶€ì—¬í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.

4. focusëœ ìš”ì†Œì˜ ê°’ì„ inputì— ëŒ€ì…
    ```ts
    const focusHandler = (e: FocusEvent<HTMLButtonElement>) => {
        setInputValue(e.currentTarget.value)
    }
    ```
</details>

---

### í¼ì§€ ë¬¸ìì—´ ê²€ìƒ‰ ê¸°ëŠ¥

<details>
    <summary>êµ¬í˜„ ë°©ë²•</summary>

xml dataë¥¼ ë°›ì•„ expressJSë¥¼ ì´ìš©í•˜ì—¬ fuzzy search ê¸°ëŠ¥ì´ ìˆëŠ” apië¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

1. fuzzy ì •ê·œ í‘œí˜„ì‹ ë§Œë“œëŠ” í•¨ìˆ˜

ììŒì´ ì…ë ¥ë˜ë„, ìŒì ˆì´ ì…ë ¥ë˜ë„ ì¼ì¹˜í•˜ëŠ” ë¬¸ìì—´ì„ ì°¾ì„ ìˆ˜ ìˆê²Œ ëœë‹¤. ë‹¨, ì¢…ì„±ê¹Œì§€ ì™„ì„±ëœ ìŒì ˆì€ ë²”ìœ„ë¡œ ì°¾ì§€ ì•Šê³  í•´ë‹¹ ê¸€ìë§Œ ì°¾ë„ë¡ í•©ë‹ˆë‹¤.

```ts
import { escapeRegExp } from "lodash";

interface ICon2syl {
  ã„±: number;
  ã„²: number;
  ã„´: number;
  ã„·: number;
  ã„¸: number;
  ã„¹: number;
  ã…: number;
  ã…‚: number;
  ã…ƒ: number;
  ã……: number;
}

function ch2pattern(ch: string) {
  const offset = 44032;
  if (/[ê°€-í£]/.test(ch)) {
    const chCode = ch.charCodeAt(0) - offset;
    if (chCode % 28 > 0) {
      return ch;
    }
    const begin = Math.floor(chCode / 28) * 28 + offset;
    const end = begin + 27;
    return `[\\u${begin.toString(16)}-\\u${end.toString(16)}]`;
  }
  if (/[ã„±-ã…]/.test(ch)) {
    const con2syl = {
      ã„±: "ê°€".charCodeAt(0),
      ã„²: "ê¹Œ".charCodeAt(0),
      ã„´: "ë‚˜".charCodeAt(0),
      ã„·: "ë‹¤".charCodeAt(0),
      ã„¸: "ë”°".charCodeAt(0),
      ã„¹: "ë¼".charCodeAt(0),
      ã…: "ë§ˆ".charCodeAt(0),
      ã…‚: "ë°”".charCodeAt(0),
      ã…ƒ: "ë¹ ".charCodeAt(0),
      ã……: "ì‚¬".charCodeAt(0),
    };
    const begin =
      ch in con2syl
        ? con2syl[ch as keyof ICon2syl]
        : (ch.charCodeAt(0) - 12613) * 588 + con2syl["ã……"];
    const end = begin + 587;
    return `[${ch}\\u${begin.toString(16)}-\\u${end.toString(16)}]`;
  }

  return escapeRegExp(ch);
}

export function createFuzzyMatcher(input: string) {
  const pattern = input.split("").map(ch2pattern).join(".*?");
  return new RegExp(pattern, "gi");
}

```

2. searchText query paramsì„ ë°›ì•„ í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë¥¼ filterí•´ì„œ ë³´ë‚´ê³  ìˆìŠµë‹ˆë‹¤.

```ts
app.get("/", async (req: Request, res: Response): Promise<Response> => {
    try {
        const { searchText } = req.query;

        if (!searchText) {
            return res.json({
                ok: false,
                error: "ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.",
                result: [],
            });
        }

        const result = dieaseData
        .filter((i) => createFuzzyMatcher(searchText as string).test(i.sickNm))
        .slice(0, 10);

        return res.json({
            ok: true,
            result,
        });
    } catch (error) {
        return res.json({
            ok: false,
            error,
            result: [],
        });
    }
});
```

</details>



